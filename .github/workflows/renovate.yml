name: "Renovate"

on:
  workflow_call:
    secrets:
      GH_TOKEN:
        required: true

jobs:
  renovate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Create config file
        uses: "DamianReeves/write-file-action@master"
        with:
          path: renovate.json
          write-mode: overwrite
          contents: |
            {
              "fileMatch": [
                "(^|/)Cargo\\.toml$"
              ],
              "versioning": "cargo"
            }

      - name: Self-hosted Renovate
        uses: renovatebot/github-action@v39.0.1
        with:
          token: ${{ secrets.GH_TOKEN }}
